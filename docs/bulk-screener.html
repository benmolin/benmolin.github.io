<html>

<head>

    <title>SNAP Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <!-- Tailwind CSS -->
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <!-- Custom CSS -->
    <link href="shared/css/bulkScreener.css" rel="stylesheet">

</head>

<body class='flex flex-col h-screen justify-between  bg-gray-100'>

    <!-- MAIN -->
    <main role="main" id='main-bulk' class="container mb-auto pt-3 sm:pt-5 sm:mt-5 pb-5 max-w-screen-lg">

        <div class='mx-auto text-center mb-4'>
            <h1>
                Bulk SNAP Prescreener
            </h1>
            <h3>
                Prescreen an entire table of clients for SNAP Eligibility by uploading a CSV<br>
                <div class='text-orange-600'>⚠️ Prototype, untested and for demonstration only ⚠</div>
            </h3>
            <small><a href='https://github.com/benmolin/snap-screener'>GitHub</a> forked from <a
                    href='https://github.com/18F/snap-js-api-prototype'>snap-js-api-prototype</a> and <a
                    href='https://github.com/18F/snap-js-prescreener-prototypes'>snap-js-prescreener-prototypes</a>
            </small>

        </div>

        <div class='step'>
            <h2>Step 1: Make sure you are working in a supported web browser</h2>
            <h4>This calculator has been tested using Chrome. This calculator will not work on mobile
                devices, and may not work with other browsers such as Internet Explorer.</h4>
        </div>

        <div class='step'>
            <h2>Step 2: Make sure your CSV is formatted correctly</h2>
            <h3 class='text-gray-900 font-semibold mt-5'>Required Inputs</h3>
            <h4>To use this calculator, you need the following columns with these exact column names.</h4>

            <!-- Checkbox to allow for hiding of table -->
            <input class="bulk_checkbox" id="bs-checkbox-required" type="checkbox" name="bulk_checkbox_required"
                onclick="showInputsTable('R')">
            <label for="bulk_checkbox" class='ml-2 font-semibold'>Show Required Inputs</label>

            <table id='bs-required-inputs-table' class="table-auto mb-2 leading-relaxed d-none">
                <thead>
                    <tr>
                        <th>Column</th>
                        <th>Description</th>
                        <th>Format</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>STATE</td>
                        <td>State for which to check eligibility</td>
                        <td>Two-letter abbreviation (e.g. "PA")</td>
                    </tr>
                    <tr>
                        <td>HH_SIZE</td>
                        <td>Household size (or use IRS Exemptions)</td>
                        <td>A number 1 or higher</td>
                    </tr>
                    <tr>
                        <td>SENIOR_IN_HOUSEHOLD</td>
                        <td>Whether an individual 60+ is part of the household</td>
                        <td>1 if true. All other values interpreted as false</td>
                    </tr>
                    <tr>
                        <td>DISABILITY_IN_HOUSEHOLD</td>
                        <td>Whether an individual with a disability is part of the household
                        </td>
                        <td>1 if true. All other values interpreted as false</td>
                    </tr>
                    <tr>
                        <td>MONTHLY_JOB_INCOME</td>
                        <td>Last months income (or use AGI and divide by 12)</td>
                        <td>A number (e.g. 1200). Use the "number" column format in Excel. Do
                            not use
                            the accounting or currency formats which add commas.</td>
                    </tr>
                    <tr>
                        <td>MONTHLY_NON_JOB_INCOME</td>
                        <td>Last months non-job income</td>
                        <td>Number</td>
                    </tr>
                    <tr>
                        <td>RESOURCES</td>
                        <td>Liquid assets, like funds in a bank account</td>
                        <td>Number</td>
                    </tr>
                </tbody>
            </table>


            <h3 class='text-gray-900 font-semibold mt-5'>Optional Inputs</h3>
            <h4>The following inputs are optional, and allow additional net income deductions.</h4>

            <!-- Checkbox to allow for hiding of table -->
            <input class="bulk_checkbox" id="bs-checkbox-optional" type="checkbox" name="bulk_checkbox_optional"
                onclick="showInputsTable('O')">
            <label for="bulk_checkbox" class='ml-2 font-semibold'>Show Optional Inputs</label>

            <table id='bs-optional-inputs-table' class="table-auto mb-2 leading-relaxed d-none">
                <thead>
                    <tr>
                        <th>Column</th>
                        <th>Description</th>
                        <th>Format</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>DEPENDENT_CARE_COSTS</td>
                        <td>Costs of daycare, babysitters, or other child care</td>
                        <td>A number (e.g. 1200). Use the "number" column format in Excel. Do
                            not use the accounting or currency formats which add commas.</td>
                    </tr>
                    <tr>
                        <td>OUT_OF_POCKET_MEDICAL_HHEOD</td>
                        <td>Monthly out of pocket medical expenses for household members who are age 60 or older or
                            disabled</td>
                        <td>Number</td>
                    </tr>
                    <tr>
                        <td>CHILD_SUPPORT</td>
                        <td>Monthly court-ordered child support payments</td>
                        <td>Number</td>
                    </tr>
                    <tr>
                        <td>RENT_OR_MORTGAGE</td>
                        <td>Monthly rent or mortgage amount</td>
                        <td>Number</td>
                    </tr>
                    <tr>
                        <td>HOMEOWNERS_INSURANCE_AND_TAXES</td>
                        <td>Monthly homeowners insurance and taxes</td>
                        <td>Number</td>
                    </tr>
                    <tr>
                        <td>HEATING_AND_COOLING</td>
                        <td>If client pays for heating or cooling</td>
                        <td>1 if true. All other values interpreted as false</td>
                    </tr>
                    <tr>
                        <td>ELECTRICITY</td>
                        <td>If client pays for electricity</td>
                        <td>1 if true</td>
                    </tr>
                    <tr>
                        <td>GAS_AND_FUEL</td>
                        <td>If client pays for gas or fuel</td>
                        <td>1 if true</td>
                    </tr>
                    <tr>
                        <td>WATER</td>
                        <td>If client pays for water</td>
                        <td>1 if true</td>
                    </tr>
                    <tr>
                        <td>SEWAGE</td>
                        <td>If client pays for sewage</td>
                        <td>1 if true</td>
                    </tr>
                    <tr>
                        <td>TRASH</td>
                        <td>If client pays for trash</td>
                        <td>1 if true</td>
                    </tr>
                    <tr>
                        <td>PHONE</td>
                        <td>If client pays for phone</td>
                        <td>1 if true</td>
                    </tr>
                </tbody>
            </table>

            <small class="form-text text-muted">

            </small>

            <h3 class='text-gray-900 font-semibold mt-5'>File Format Information</h3>
            <input class="bulk_checkbox" id="bs-checkbox-file-format" type="checkbox" name="bulk_checkbox_file-format"
                onclick="showInputsTable('F')">
            <label for="bulk_checkbox" class='ml-2 font-semibold'>Show Information</label>
            <h4 id='file-format-information' class='d-none'>
                There cannot be any "," or "#" or parenthesis in any of your cells. Other
                non-letter characters may also break this calculator. It does not matter if you have other columns than
                the columns above, however if you are running into
                errors you may want to
                delete your other columns, only keeping the essential data.
                <br><br>
                Your file must be of type ".csv" (comma-separated-values), not an Excel file. You can
                convert an Excel file to a csv file by clicking "save-as" and then choosing ".csv." If you are
                converting
                the file from Excel, after saving it as a csv, close and re-open the new csv file and save it again.
                This will remove blank extra rows that sometimes get added below your data when saving Excel files.
            </h4>
            <br>
            <button type="button" class="btn btn-primary btn-md font-bold mt-3" id='sample-csv'>
                Download Sample CSV
            </button>
            <button type="button" class="btn btn-info btn-md font-bold mt-3" id='testing-csv'>
                Download Testing CSV
            </button>
            <small class='d-block mt-3'>
                If you need a sample CSV to test this with, download one here. You can also use this csv as a template
                for your own data. If no file is being downloaded when you click the button above, try clicking the
                button a few times or opening this page in a new tab or browser.
            </small>

        </div>

        <div class='step'>
            <h2>Step 3: Upload your CSV</h2>
            <h4>Results will be calculated as soon as your file is uploaded. The table below only shows short responses,
                and does not contain full HTML explanations. If HTML explanations are needed, download the result CSV.
            </h4>
            <input type="file" name="File Upload" id="csvUpload" class='mb-4' accept=".csv" />

            <div id='error-message' class="alert alert-danger d-none" role='alert'></div>
            <div id='upload-message' class="alert alert-success d-none" role="alert"></div>
            <div id='results-array'></div>
        </div>


        <div class='step'>
            <h2>Step 4: Download your results</h2>
            <button type="button" class="btn btn-success btn-md font-bold mb-3" id='download-button' disabled>
                Download Results CSV
            </button>
            <h4>There will be the following additional columns.</h4>
            <input class="bulk_checkbox" id="bs-checkbox-output" type="checkbox" name="bulk_checkbox_output"
                onclick="showInputsTable('OUT')">
            <label for="bulk_checkbox" class='ml-2 font-semibold'>Show Information</label>
            <table id='output-table' class="table-auto mb-2 leading-relaxed d-none">
                <thead>
                    <tr>
                        <th>Column</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>estimated_eligibility</td>
                        <td>If client is likely eligible for SNAP</td>
                    </tr>
                    <tr>
                        <td>estimated_monthly_benefit</td>
                        <td>Client's estimated monthly benefit</td>
                    </tr>
                    <tr>
                        <td>GI_test</td>
                        <td>Whether client passes gross income test</td>
                    </tr>
                    <tr>
                        <td>NI_test</td>
                        <td>Whether client passes net income test</td>
                    </tr>
                    <tr>
                        <td>AL_test</td>
                        <td>Whether client passes asset limit test</td>
                    </tr>
                    <tr>
                        <td>EXPLAIN_GI</td>
                        <td>Explanation for how the client's gross income was calculated (HTML)</td>
                    </tr>
                    <tr>
                        <td>EXPLAIN_NI</td>
                        <td>Explanation for how the client's net income was calculated (HTML)</td>
                    </tr>
                    <tr>
                        <td>EXPLAIN_benefit</td>
                        <td>Explanation for how the client's benefit amount was calculated (HTML)</td>
                    </tr>
                    <tr>
                        <td>EXPLAIN_GI_test</td>
                        <td>Explanation for the client's gross income test result (HTML)</td>
                    </tr>
                    <tr>
                        <td>EXPLAIN_NI_test</td>
                        <td>Explanation for the client's net income test result (HTML)</td>
                    </tr>
                    <tr>
                        <td>EXPLAIN_AL_test</td>
                        <td>Explanation for the client's asset limit test result (HTML)</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </main>

</body>

<!-- Custom JS -->
<script src="api.js"></script>
<script src="shared/js/bulkScreener.js"></script>


</html>